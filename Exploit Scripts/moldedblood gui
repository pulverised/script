--[[  Placeholder  |  Fully functional tabs, scrolling, toggles & dropdown
     
--]]

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local lp = Players.LocalPlayer

-- Colors (tuned to match the screenshot)
local COL_BG      = Color3.fromRGB(16,16,16)
local COL_PANEL   = Color3.fromRGB(22,22,22)
local COL_CARD    = Color3.fromRGB(33,33,33)
local COL_TEXT    = Color3.fromRGB(235,235,235)
local COL_SUB     = Color3.fromRGB(160,160,160)
local COL_ACCENT  = Color3.fromRGB(210,52,51) -- red selected tab
local COL_OFF     = Color3.fromRGB(60,60,60)
local COL_ON      = Color3.fromRGB(120,200,120)

local function roundify(inst, r)
	local c = Instance.new("UICorner")
	c.CornerRadius = UDim.new(0, r or 8)
	c.Parent = inst
	return c
end

local function shadow(parent)
	local s = Instance.new("ImageLabel")
	s.Name = "Shadow"
	s.BackgroundTransparency = 1
	s.Image = "rbxassetid://5028857084"
	s.ImageTransparency = 0.35
	s.ScaleType = Enum.ScaleType.Slice
	s.SliceCenter = Rect.new(24,24,276,276)
	s.Size = UDim2.new(1, 40, 1, 40)
	s.Position = UDim2.new(0, -20, 0, -20)
	s.ZIndex = 0
	s.Parent = parent
end

-- Root gui
local gui = Instance.new("ScreenGui")
gui.Name = "placeholder"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = lp:WaitForChild("PlayerGui")

-- Main window 
local window = Instance.new("Frame")
window.Name = "Window"
window.Size = UDim2.new(0.75, 0, 0.75, 0) -- 75% of screen size
window.Position = UDim2.new(0.5, 0, 0.5, 0)
window.AnchorPoint = Vector2.new(0.5, 0.5)
window.BackgroundColor3 = COL_BG
window.BorderSizePixel = 0
window.Parent = gui
roundify(window, 10)
shadow(window)

-- Prevent window from getting too small/too big
local constraint = Instance.new("UISizeConstraint")
constraint.MinSize = Vector2.new(500, 350) -- smallest allowed size
constraint.MaxSize = Vector2.new(860, 520) -- largest allowed size (like PC)
constraint.Parent = window


-- Top bar (title + close)
local top = Instance.new("Frame")
top.Name = "Topbar"
top.Size = UDim2.new(1, 0, 0, 44)
top.BackgroundColor3 = COL_PANEL
top.BorderSizePixel = 0
top.Parent = window
roundify(top, 10)

local title = Instance.new("TextLabel")
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.Text = "placeholder  |  Version: 1.0.0"
title.TextColor3 = COL_TEXT
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.Size = UDim2.new(1, -60, 1, 0)
title.Position = UDim2.new(0, 16, 0, 0)
title.Parent = top

local closeBtn = Instance.new("TextButton")
closeBtn.Text = "✕"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = COL_TEXT
closeBtn.AutoButtonColor = false
closeBtn.Size = UDim2.new(0, 44, 1, 0)
closeBtn.Position = UDim2.new(1, -44, 0, 0)
closeBtn.BackgroundTransparency = 1
closeBtn.Parent = top
closeBtn.MouseButton1Click:Connect(function()
	gui.Enabled = false -- or gui:Destroy()
end)

-- Drag window by the top bar
do
	local dragging, dragStart, startPos
	top.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = window.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then dragging = false end
			end)
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			window.Position = UDim2.fromOffset(startPos.X.Offset + delta.X, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- Main body container (below topbar)
local body = Instance.new("Frame")
body.Name = "Body"
body.Size = UDim2.new(1, 0, 1, -44)
body.Position = UDim2.new(0, 0, 0, 44)
body.BackgroundTransparency = 1
body.Parent = window

-- Sidebar
local sidebar = Instance.new("Frame")
sidebar.Name = "Sidebar"
sidebar.Size = UDim2.new(0, 210, 1, -20)
sidebar.Position = UDim2.new(0, 10, 0, 10)
sidebar.BackgroundColor3 = COL_PANEL
sidebar.BorderSizePixel = 0
sidebar.Parent = body
roundify(sidebar, 10)

local list = Instance.new("UIListLayout")
list.Padding = UDim.new(0, 8)
list.SortOrder = Enum.SortOrder.LayoutOrder
list.Parent = sidebar

local function makeTabButton(text, selected)
	local b = Instance.new("TextButton")
	b.AutoButtonColor = false
	b.Size = UDim2.new(1, -20, 0, 44)
	b.Position = UDim2.new(0, 10, 0, 0)
	b.BackgroundColor3 = selected and COL_ACCENT or Color3.fromRGB(26,26,26)
	b.Text = "  "..text
	b.TextXAlignment = Enum.TextXAlignment.Left
	b.TextColor3 = COL_TEXT
	b.Font = Enum.Font.Gotham
	b.TextSize = 16
	b.Parent = sidebar
	roundify(b, 8)

	local stroke = Instance.new("UIStroke")
	stroke.Thickness = 1
	stroke.Color = Color3.fromRGB(55,55,55)
	stroke.Transparency = selected and 1 or 0.35
	stroke.Parent = b

	return b
end

-- Right content container
local contentHolder = Instance.new("Frame")
contentHolder.Size = UDim2.new(1, -230, 1, -20)
contentHolder.Position = UDim2.new(0, 220, 0, 10)
contentHolder.BackgroundColor3 = COL_PANEL
contentHolder.BorderSizePixel = 0
contentHolder.Parent = body
roundify(contentHolder, 10)

-- Scrolling frame for page content
local function makeScrollPage(name)
	local p = Instance.new("ScrollingFrame")
	p.Name = name
	p.Size = UDim2.new(1, -20, 1, -20)
	p.Position = UDim2.new(0, 10, 0, 10)
	p.BackgroundTransparency = 1
	p.BorderSizePixel = 0
	p.ScrollBarThickness = 5

	local lay = Instance.new("UIListLayout")
	lay.Padding = UDim.new(0, 12)
	lay.SortOrder = Enum.SortOrder.LayoutOrder
	lay.Parent = p

	-- Auto canvas resize
	local function recalc()
		p.CanvasSize = UDim2.new(0, 0, 0, lay.AbsoluteContentSize.Y + 10)
	end
	lay:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(recalc)
	task.defer(recalc)

	p.Parent = contentHolder
	return p
end

-- Section title
local function sectionTitle(parent, text)
	local t = Instance.new("TextLabel")
	t.BackgroundTransparency = 1
	t.Font = Enum.Font.GothamBold
	t.Text = text
	t.TextColor3 = COL_TEXT
	t.TextSize = 20
	t.TextXAlignment = Enum.TextXAlignment.Left
	t.Size = UDim2.new(1, -20, 0, 28)
	t.Position = UDim2.new(0, 10, 0, 0)
	t.Parent = parent
	return t
end

-- Card row (label + optional description + right-side widget container)
local function makeRow(parent, titleText, subText)
	local card = Instance.new("Frame")
	card.Size = UDim2.new(1, -20, 0, subText and 64 or 54)
	card.Position = UDim2.new(0, 10, 0, 0)
	card.BackgroundColor3 = COL_CARD
	card.BorderSizePixel = 0
	card.Parent = parent
	roundify(card, 10)

	local t = Instance.new("TextLabel")
	t.BackgroundTransparency = 1
	t.Font = Enum.Font.Gotham
	t.Text = titleText
	t.TextColor3 = COL_TEXT
	t.TextSize = 16
	t.TextXAlignment = Enum.TextXAlignment.Left
	t.Size = UDim2.new(1, -140, 0, 28)
	t.Position = UDim2.new(0, 12, 0, 8)
	t.Parent = card

	if subText then
		local sub = Instance.new("TextLabel")
		sub.BackgroundTransparency = 1
		sub.Font = Enum.Font.Gotham
		sub.Text = subText
		sub.TextColor3 = COL_SUB
		sub.TextSize = 13
		sub.TextXAlignment = Enum.TextXAlignment.Left
		sub.Size = UDim2.new(1, -140, 0, 20)
		sub.Position = UDim2.new(0, 12, 0, 32)
		sub.Parent = card
	end

	local right = Instance.new("Frame")
	right.Name = "Right"
	right.BackgroundTransparency = 1
	right.Size = UDim2.new(0, 120, 1, 0)
	right.Position = UDim2.new(1, -124, 0, 0)
	right.Parent = card

	return card, right
end

-- Toggle widget
local function addToggle(parentRight, default, onChanged)
	local btn = Instance.new("TextButton")
	btn.AutoButtonColor = false
	btn.Size = UDim2.new(0, 44, 0, 24)
	btn.Position = UDim2.new(1, -44, 0.5, -12)
	btn.BackgroundColor3 = COL_OFF
	btn.Text = ""
	btn.Parent = parentRight
	roundify(btn, 12)

	local knob = Instance.new("Frame")
	knob.Size = UDim2.new(0, 20, 0, 20)
	knob.Position = UDim2.new(0, 2, 0.5, -10)
	knob.BackgroundColor3 = Color3.fromRGB(230,230,230)
	knob.BorderSizePixel = 0
	knob.Parent = btn
	roundify(knob, 10)

	local state = default and true or false
	local function apply(animated)
		local toBG = state and COL_ON or COL_OFF
		local toX  = state and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 2, 0.5, -10)
		if animated then
			TweenService:Create(btn, TweenInfo.new(0.15), {BackgroundColor3 = toBG}):Play()
			TweenService:Create(knob, TweenInfo.new(0.15), {Position = toX}):Play()
		else
			btn.BackgroundColor3 = toBG
			knob.Position = toX
		end
	end
	apply(false)

	btn.MouseButton1Click:Connect(function()
		state = not state
		apply(true)
		if onChanged then onChanged(state) end
	end)

	return {
		Set = function(v) state = v; apply(true) end,
		Get = function() return state end
	}
end

-- Dropdown widget
local function addDropdown(parentRight, options, defaultIndex, onChanged)
	local base = Instance.new("TextButton")
	base.AutoButtonColor = false
	base.Size = UDim2.new(0, 112, 0, 28)
	base.Position = UDim2.new(1, -112, 0.5, -14)
	base.BackgroundColor3 = Color3.fromRGB(28,28,28)
	base.Text = ""
	base.ZIndex = 10
	base.Parent = parentRight
	roundify(base, 8)

	local current = Instance.new("TextLabel")
	current.BackgroundTransparency = 1
	current.Size = UDim2.new(1, -26, 1, 0)
	current.Position = UDim2.new(0, 8, 0, 0)
	current.Font = Enum.Font.GothamBold
	current.TextSize = 16
	current.TextXAlignment = Enum.TextXAlignment.Right
	current.TextColor3 = COL_TEXT
	current.Text = options[defaultIndex] or options[1]
	current.ZIndex = 11
	current.Parent = base

	local chev = Instance.new("TextLabel")
	chev.BackgroundTransparency = 1
	chev.Size = UDim2.new(0, 18, 1, 0)
	chev.Position = UDim2.new(1, -18, 0, 0)
	chev.Font = Enum.Font.GothamBold
	chev.TextSize = 16
	chev.TextColor3 = COL_SUB
	chev.Text = "˅"
	chev.ZIndex = 11
	chev.Parent = base

	-- Parent list to ScreenGui so it’s never clipped
	local screenGui = base:FindFirstAncestorOfClass("ScreenGui")
  local listFrame = Instance.new("Frame")
  listFrame.Visible = false
  listFrame.BackgroundColor3 = Color3.fromRGB(20,20,20)
  listFrame.BorderSizePixel = 0
  listFrame.Size = UDim2.new(0, 140, 0, 0) -- start at 0, will auto-resize
  listFrame.ZIndex = 15
  listFrame.ClipsDescendants = true
  listFrame.Parent = screenGui
  roundify(listFrame, 8)
  shadow(listFrame)

	listFrame.ZIndex = 15
	listFrame.ClipsDescendants = false
	listFrame.Parent = screenGui
	roundify(listFrame, 8)
	shadow(listFrame)

	local uiList = Instance.new("UIListLayout")
	uiList.Padding = UDim.new(0, 4)
	uiList.Parent = listFrame
	uiList.HorizontalAlignment = Enum.HorizontalAlignment.Center
	uiList.VerticalAlignment = Enum.VerticalAlignment.Top

	local function setValue(idx)
		current.Text = options[idx]
		if onChanged then onChanged(options[idx], idx) end
	end

	for i, opt in ipairs(options) do
		local o = Instance.new("TextButton")
		o.Size = UDim2.new(1, -10, 0, 24)
		o.BackgroundColor3 = Color3.fromRGB(28,28,28)
		o.AutoButtonColor = false
		o.TextColor3 = COL_TEXT
		o.Font = Enum.Font.Gotham
		o.TextSize = 14
		o.Text = opt
		o.ZIndex = 16
		o.Parent = listFrame
		roundify(o, 6)
		o.MouseButton1Click:Connect(function()
			setValue(i)
			listFrame.Visible = false
		end)
	end
	setValue(defaultIndex or 1)

	-- Position list below or above depending on screen space
	local function updateListPosition()
		local absPos = base.AbsolutePosition
		local absSize = base.AbsoluteSize
		local screenY = workspace.CurrentCamera.ViewportSize.Y
		local listHeight = listFrame.AbsoluteSize.Y

		-- default: open downward
		local posY = absPos.Y + absSize.Y + 4

		-- if near bottom, open upward
		if posY + listHeight > screenY then
			posY = absPos.Y - listHeight - 4
		end

		listFrame.Position = UDim2.fromOffset(absPos.X, posY)
	end

	-- Open/close dropdown on click/tap
	base.MouseButton1Click:Connect(function()
		updateListPosition()
		listFrame.Visible = not listFrame.Visible
	end)

	-- Close dropdown
	UserInputService.InputBegan:Connect(function(input, gpe)
		if gpe then return end
		if listFrame.Visible and input.UserInputType == Enum.UserInputType.MouseButton1 then
			local guiObj = input.Target
			if guiObj and not (listFrame:IsAncestorOf(guiObj) or base:IsAncestorOf(guiObj)) then
				listFrame.Visible = false
			end
		end
	end)

	return {
		SetIndex = function(i) setValue(math.clamp(i,1,#options)) end,
		GetText  = function() return current.Text end
	}
end



-- PAGES ----------------------------------------------------------
local pages = {}
local function newPage(name)
	local p = makeScrollPage(name)
	p.Visible = false
	pages[name] = p
	return p
end

-- HOME (simple banner)
local home = newPage("Home")
do
	sectionTitle(home, "Welcome")
	local card = Instance.new("TextLabel")
	card.Size = UDim2.new(1, -20, 0, 80)
	card.Position = UDim2.new(0, 10, 0, 0)
	card.BackgroundColor3 = COL_CARD
	card.Text = "Select a tab on the left to begin."
	card.TextColor3 = COL_TEXT
	card.TextSize = 18
	card.Font = Enum.Font.Gotham
	card.BackgroundTransparency = 0
	card.Parent = home
	roundify(card, 10)
end

-- MAIN (replicates the screenshot’s content)
local main = newPage("Main")
do
	sectionTitle(main, "Skill")
	local c1 = makeRow(main, "Auto Ultimate", "This is Meaning Auto Use Ultimate")
	addToggle(c1, false, function(s) print("Auto Ultimate:", s) end)

	local c2 = makeRow(main, "Auto Dash", "This is Meaning Auto Use Dash")
	addToggle(c2, false, function(s) print("Auto Dash:", s) end)

	sectionTitle(main, "Aim")
	local aimDrop = makeRow(main, "Choose Aim Part")
	addDropdown(aimDrop, {"Head", "Torso", "HumanoidRootPart", "Random"}, 1, function(val)
		print("Aim Part:", val)
	end)

	local aimLock = makeRow(main, "Aimlock", "Aimlock = Lock Camera Player")
	addToggle(aimLock, false, function(s) print("Aimlock:", s) end)

	sectionTitle(main, "Body")
	local k1 = makeRow(main, "Anti-Knockback", "BETA")
	addToggle(k1, false, function(s) print("Anti-Knockback:", s) end)

	local k2 = makeRow(main, "Anti-Stun", "BETA")
	addToggle(k2, false, function(s) print("Anti-Stun:", s) end)

	local k3 = makeRow(main, "Anti-Busy", "BETA")
	addToggle(k3, false, function(s) print("Anti-Busy:", s) end)
end

-- FARMING / KILLER / MISC stubs (blank pages so buttons switch correctly)
local farming = newPage("Farming")
sectionTitle(farming, "Farming")

local killer = newPage("Killer")
sectionTitle(killer, "Killer")

local misc = newPage("Misc")
sectionTitle(misc, "Misc")

-- SIDEBAR BUTTONS + TAB SWITCHING -------------------------------
local tabs = {
	{ name = "Home",    page = home },
	{ name = "Main",    page = main },
	{ name = "Farming", page = farming },
	{ name = "Killer",  page = killer },
	{ name = "Misc",    page = misc },
}
local buttons = {}
local function selectTab(idx)
	for i, t in ipairs(tabs) do
		t.page.Visible = (i == idx)
		local b = buttons[i]
		b.BackgroundColor3 = (i == idx) and COL_ACCENT or Color3.fromRGB(26,26,26)
		b:FindFirstChildOfClass("UIStroke").Transparency = (i == idx) and 1 or 0.35
	end
end

for i, t in ipairs(tabs) do
	local b = makeTabButton(t.name, t.name=="Main")
	buttons[i] = b
	b.MouseButton1Click:Connect(function()
		selectTab(i)
	end)
end

-- start on Main like the screenshot
selectTab(2)
