--[[ Fully functional Roblox GUI with tabs, toggles & dropdowns ]]--

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local lp = Players.LocalPlayer

-- Colors
local COL_BG      = Color3.fromRGB(16,16,16)
local COL_PANEL   = Color3.fromRGB(22,22,22)
local COL_CARD    = Color3.fromRGB(33,33,33)
local COL_TEXT    = Color3.fromRGB(235,235,235)
local COL_SUB     = Color3.fromRGB(160,160,160)
local COL_ACCENT  = Color3.fromRGB(210,52,51)
local COL_OFF     = Color3.fromRGB(60,60,60)
local COL_ON      = Color3.fromRGB(120,200,120)

-- Helper functions
local function roundify(inst, r)
	local c = Instance.new("UICorner")
	c.CornerRadius = UDim.new(0, r or 8)
	c.Parent = inst
	return c
end

local function shadow(parent)
	local s = Instance.new("ImageLabel")
	s.Name = "Shadow"
	s.BackgroundTransparency = 1
	s.Image = "rbxassetid://5028857084"
	s.ImageTransparency = 0.35
	s.ScaleType = Enum.ScaleType.Slice
	s.SliceCenter = Rect.new(24,24,276,276)
	s.Size = UDim2.new(1, 40, 1, 40)
	s.Position = UDim2.new(0, -20, 0, -20)
	s.ZIndex = 0
	s.Parent = parent
end

-- Root GUI
local gui = Instance.new("ScreenGui")
gui.Name = "placeholder"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = lp:WaitForChild("PlayerGui")

-- Main window
local window = Instance.new("Frame")
window.Name = "Window"
window.Size = UDim2.new(0.75, 0, 0.75, 0)
window.Position = UDim2.new(0.5, 0, 0.5, 0)
window.AnchorPoint = Vector2.new(0.5, 0.5)
window.BackgroundColor3 = COL_BG
window.BorderSizePixel = 0
window.Parent = gui
roundify(window, 10)
shadow(window)

-- Top bar
local top = Instance.new("Frame")
top.Name = "Topbar"
top.Size = UDim2.new(1, 0, 0, 44)
top.BackgroundColor3 = COL_PANEL
top.BorderSizePixel = 0
top.Parent = window
roundify(top, 10)

local title = Instance.new("TextLabel")
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.Text = "placeholder  |  Version: 1.0.0"
title.TextColor3 = COL_TEXT
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.Size = UDim2.new(1, -60, 1, 0)
title.Position = UDim2.new(0, 16, 0, 0)
title.Parent = top

local closeBtn = Instance.new("TextButton")
closeBtn.Text = "âœ•"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = COL_TEXT
closeBtn.AutoButtonColor = false
closeBtn.Size = UDim2.new(0, 44, 1, 0)
closeBtn.Position = UDim2.new(1, -44, 0, 0)
closeBtn.BackgroundTransparency = 1
closeBtn.Parent = top
closeBtn.MouseButton1Click:Connect(function()
	gui.Enabled = false
end)

-- Dragging
do
	local dragging, dragStart, startPos
	top.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = window.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then dragging = false end
			end)
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			local delta = input.Position - dragStart
			window.Position = UDim2.fromOffset(startPos.X.Offset + delta.X, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- Body
local body = Instance.new("Frame")
body.Name = "Body"
body.Size = UDim2.new(1, 0, 1, -44)
body.Position = UDim2.new(0, 0, 0, 44)
body.BackgroundTransparency = 1
body.Parent = window

-- Sidebar
local sidebar = Instance.new("Frame")
sidebar.Name = "Sidebar"
sidebar.Size = UDim2.new(0, 210, 1, -20)
sidebar.Position = UDim2.new(0, 10, 0, 10)
sidebar.BackgroundColor3 = COL_PANEL
sidebar.BorderSizePixel = 0
sidebar.Parent = body
roundify(sidebar, 10)

local list = Instance.new("UIListLayout")
list.Padding = UDim.new(0, 8)
list.SortOrder = Enum.SortOrder.LayoutOrder
list.Parent = sidebar

-- Content holder
local contentHolder = Instance.new("Frame")
contentHolder.Size = UDim2.new(1, -230, 1, -20)
contentHolder.Position = UDim2.new(0, 220, 0, 10)
contentHolder.BackgroundColor3 = COL_PANEL
contentHolder.BorderSizePixel = 0
contentHolder.Parent = body
roundify(contentHolder, 10)

-- Scroll page helper
local function makeScrollPage(name)
	local p = Instance.new("ScrollingFrame")
	p.Name = name
	p.Size = UDim2.new(1, -20, 1, -20)
	p.Position = UDim2.new(0, 10, 0, 10)
	p.BackgroundTransparency = 1
	p.BorderSizePixel = 0
	p.ScrollBarThickness = 5
	p.Parent = contentHolder

	local lay = Instance.new("UIListLayout")
	lay.Padding = UDim.new(0, 12)
	lay.SortOrder = Enum.SortOrder.LayoutOrder
	lay.Parent = p

	local function recalc()
		p.CanvasSize = UDim2.new(0, 0, 0, lay.AbsoluteContentSize.Y + 10)
	end
	lay:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(recalc)
	task.defer(recalc)

	return p
end

-- Section title
local function sectionTitle(parent, text)
	local t = Instance.new("TextLabel")
	t.BackgroundTransparency = 1
	t.Font = Enum.Font.GothamBold
	t.Text = text
	t.TextColor3 = COL_TEXT
	t.TextSize = 20
	t.TextXAlignment = Enum.TextXAlignment.Left
	t.Size = UDim2.new(1, -20, 0, 28)
	t.Position = UDim2.new(0, 10, 0, 0)
	t.Parent = parent
	return t
end

-- Row helper
local function makeRow(parent, titleText, subText)
	local card = Instance.new("Frame")
	card.Size = UDim2.new(1, -20, 0, subText and 64 or 54)
	card.Position = UDim2.new(0, 10, 0, 0)
	card.BackgroundColor3 = COL_CARD
	card.BorderSizePixel = 0
	card.Parent = parent
	roundify(card, 10)

	local t = Instance.new("TextLabel")
	t.BackgroundTransparency = 1
	t.Font = Enum.Font.Gotham
	t.Text = titleText
	t.TextColor3 = COL_TEXT
	t.TextSize = 16
	t.TextXAlignment = Enum.TextXAlignment.Left
	t.Size = UDim2.new(1, -140, 0, 28)
	t.Position = UDim2.new(0, 12, 0, 8)
	t.Parent = card

	if subText then
		local sub = Instance.new("TextLabel")
		sub.BackgroundTransparency = 1
		sub.Font = Enum.Font.Gotham
		sub.Text = subText
		sub.TextColor3 = COL_SUB
		sub.TextSize = 13
		sub.TextXAlignment = Enum.TextXAlignment.Left
		sub.Size = UDim2.new(1, -140, 0, 20)
		sub.Position = UDim2.new(0, 12, 0, 32)
		sub.Parent = card
	end

	local right = Instance.new("Frame")
	right.Name = "Right"
	right.BackgroundTransparency = 1
	right.Size = UDim2.new(0, 120, 1, 0)
	right.Position = UDim2.new(1, -124, 0, 0)
	right.Parent = card

	return card, right
end

-- Toggle helper
local function addToggle(parentRight, default, onChanged)
	local btn = Instance.new("TextButton")
	btn.AutoButtonColor = false
	btn.Size = UDim2.new(0, 44, 0, 24)
	btn.Position = UDim2.new(1, -44, 0.5, -12)
	btn.BackgroundColor3 = COL_OFF
	btn.Text = ""
	btn.Parent = parentRight
	roundify(btn, 12)

	local knob = Instance.new("Frame")
	knob.Size = UDim2.new(0, 20, 0, 20)
	knob.Position = UDim2.new(0, 2, 0.5, -10)
	knob.BackgroundColor3 = Color3.fromRGB(230,230,230)
	knob.BorderSizePixel = 0
	knob.Parent = btn
	roundify(knob, 10)

	local state = default and true or false
	local function apply(animated)
		local toBG = state and COL_ON or COL_OFF
		local toX  = state and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 2, 0.5, -10)
		if animated then
			TweenService:Create(btn, TweenInfo.new(0.15), {BackgroundColor3 = toBG}):Play()
			TweenService:Create(knob, TweenInfo.new(0.15), {Position = toX}):Play()
		else
			btn.BackgroundColor3 = toBG
			knob.Position = toX
		end
	end
	apply(false)

	btn.MouseButton1Click:Connect(function()
		state = not state
		apply(true)
		if onChanged then onChanged(state) end
	end)

	return {
		Set = function(v) state = v; apply(true) end,
		Get = function() return state end
	}
end

-- Pages
local pages = {}
local function newPage(name)
	local p = makeScrollPage(name)
	p.Visible = false
	pages[name] = p
	return p
end

-- CREATE PAGES
local home = newPage("Home")
sectionTitle(home, "Welcome")

local main = newPage("Main")
-- MAIN PAGE CONTENT
sectionTitle(main, "Auto")

-- Auto Buy toggle
local autoBuyRow = makeRow(main, "Auto Buy", "Automatically purchase something")
addToggle(autoBuyRow, false, function(state)
    print("Auto Buy:", state)
end)

-- Auto Stomp toggle
local autoStompRow = makeRow(main, "Auto Stomp", "Stomp them automatically")
addToggle(autoStompRow, false, function(state)
    print("Auto Stomp:", state)
end)

-- Aim Section
sectionTitle(main, "Aim")

-- Aim Part dropdown
local aimRow = makeRow(main, "Choose Aim Part")
-- Dropdown code (simplified for brevity)
do
	local options = {"Head", "Torso", "HumanoidRootPart", "Random"}
	local base = Instance.new("TextButton")
	base.Size = UDim2.new(0,112,0,28)
	base.Position = UDim2.new(1,-112,0.5,-14)
	base.BackgroundColor3 = Color3.fromRGB(28,28,28)
	base.Text = ""
	base.Parent = aimRow:FindFirstChild("Right")
	roundify(base,8)

	local current = Instance.new("TextLabel")
	current.BackgroundTransparency = 1
	current.Size = UDim2.new(1,-26,1,0)
	current.Position = UDim2.new(0,8,0,0)
	current.Font = Enum.Font.GothamBold
	current.TextSize = 16
	current.TextXAlignment = Enum.TextXAlignment.Right
	current.TextColor3 = COL_TEXT
	current.Text = options[1]
	current.Parent = base

	base.MouseButton1Click:Connect(function()
		current.Text = options[math.random(1,#options)]
		print("Aim Part:", current.Text)
	end)
end

-- Aimlock toggle
local aimLockRow = makeRow(main, "Aimlock", "Lock camera onto player")
addToggle(aimLockRow, false, function(state)
    print("Aimlock:", state)
end)

-- Body Section
sectionTitle(main, "Body")

local noJumpRow = makeRow(main, "No Jump Cooldown", "Removes jump delay")
addToggle(noJumpRow, false, function(state)
    print("No Jump Cooldown:", state)
end)

local antiSlowRow = makeRow(main, "Anti-Slow", "Prevents speed reduction")
addToggle(antiSlowRow, false, function(state)
    print("Anti-Slow:", state)
end)

local antiBusyRow = makeRow(main, "Anti-Busy", "Beta feature")
addToggle(antiBusyRow, false, function(state)
    print("Anti-Busy:", state)
end)

-- OTHER PAGES
local farming = newPage("Auto-Farm")
sectionTitle(farming, "Auto-Farm")

local killer = newPage("Rage")
sectionTitle(killer, "Rage")

local misc = newPage("Misc")
sectionTitle(misc, "Misc")

-- SIDEBAR TABS
local tabs = {
	{ name = "Home",      page = home },
	{ name = "Main",      page = main },
	{ name = "Auto-Farm", page = farming },
	{ name = "Rage",      page = killer },
	{ name = "Misc",      page = misc },
}

local buttons = {}
local function makeTabButton(text, selected)
	local b = Instance.new("TextButton")
	b.AutoButtonColor = false
	b.Size = UDim2.new(1, -20, 0, 44)
	b.BackgroundColor3 = selected and COL_ACCENT or Color3.fromRGB(26,26,26)
	b.Text = "  "..text
	b.TextXAlignment = Enum.TextXAlignment.Left
	b.TextColor3 = COL_TEXT
	b.Font = Enum.Font.Gotham
	b.TextSize = 16
	b.Parent = sidebar
	roundify(b,8)

	local stroke = Instance.new("UIStroke")
	stroke.Thickness = 1
	stroke.Color = Color3.fromRGB(55,55,55)
	stroke.Transparency = selected and 1 or 0.35
	stroke.Parent = b

	return b
end

local function selectTab(idx)
	for i, t in ipairs(tabs) do
		t.page.Visible = (i == idx)
		local b = buttons[i]
		b.BackgroundColor3 = (i == idx) and COL_ACCENT or Color3.fromRGB(26,26,26)
		b:FindFirstChildOfClass("UIStroke").Transparency = (i == idx) and 1 or 0.35
	end
end

for i, t in ipairs(tabs) do
	local b = makeTabButton(t.name, i == 2)
	buttons[i] = b
	b.MouseButton1Click:Connect(function()
		selectTab(i)
	end)
end

-- Start on Main
selectTab(2)
